<?php
foreach ($tahun_tahun->result() as $row) {
    $yearName = $row->TAHUN_TAHUN;
}
?>
<h4>Tahun <?php echo $yearName . ': '; ?>Bab 3.1 Gambaran Kondisi Sarana dan Prasarana Rumah Sakit</h4>
<thead>
    <tr>
        <th rowspan="5">No</th>
        <th rowspan="5">Region</th>
        <th rowspan="5">Kode RS</th> 
        <th rowspan="5">Nama RS</th>   

        <th colspan="156">Jenis Sarana dan Prasarana</th> 

        <th rowspan="3">Total</th>
    </tr>
    <tr>
        <th colspan="4">1.Bangunan/Ruang Gawat Darurat</th>
        <th colspan="4">2.Bangunan/Ruang Rawat Jalan</th>
        <th colspan="4">3.Bangunan/Ruang Rawat Inap</th>
        <th colspan="4">4.Bangunan/Ruang Bedah/Kamar Operasi</th>
        <th colspan="4">5.Bangunan/Ruang Rawat Intensif</th>
        <th colspan="4">6.Bangunan/Ruang Isolasi</th>
        <th colspan="4">7.Bangunan/Ruang Radiologi</th>
        <th colspan="4">8.Bangunan/Ruang Laboratorium Klinik</th>
        <th colspan="4">9.Bangunan/Ruang Farmasi</th>
        <th colspan="4">10.Bangunan/Ruang Gizi</th>
        <th colspan="4">11.Bangunan/Ruang Rehabilitasi Medik</th>
        <th colspan="4">12.Bangunan/Ruang Pemeliharaan Sarana dan Prasarana</th>
        <th colspan="4">13.Bangunan/Ruang Pengelolaan Limbah</th>
        <th colspan="4">14.Bangunan/Ruang Sterilisasi</th>
        <th colspan="4">15.Bangunan/Ruang Laundry</th>
        <th colspan="4">16.Bangunan/Ruang Pemulasaran Jenazah</th>
        <th colspan="4">17.Bangunan/Ruang Administrasi</th>
        <th colspan="4">18.Bangunan/Ruang Gudang</th>
        <th colspan="4">19.Bangunan/Ruang Sanitasi</th>
        <th colspan="4">20.Bangunan/Ruang DInas Asrama</th>
        <th colspan="4">21.Ambulan</th>
        <th colspan="4">22.Ruang Komite Medis</th>
        <th colspan="4">23.Ruang PKMRS</th>
        <th colspan="4">24.Ruang Perpustakaan</th>
        <th colspan="4">25.Ruang Jaga Ko Ass</th>
        <th colspan="4">26.Ruang Pertemuan</th>
        <th colspan="4">27.Bangunan/Ruang Diklat</th>
        <th colspan="4">28.Ruang Diskusi</th>
        <th colspan="4">29.Skil Lab dan Audio Visual</th>
        <th colspan="4">30.Sistem Informasi Rumah Sakit</th>
        <th colspan="4">31.Sistem Dokumentasi Medis Pendidikan</th>
        <th colspan="4">32.Listrik/Genset</th>
        <th colspan="4">33.Air</th>
        <th colspan="4">34.Gas Medis</th>
        <th colspan="4">35.Limbah Cair</th>
        <th colspan="4">36.Limbah Padat</th>
        <th colspan="4">37.Penanganan Kebakaran</th>
        <th colspan="4">38.Perangkat Komunikasi (24 Jam)</th>
        <th colspan="4">39.Tempat Tidur</th>
    </tr>

    <tr>
        <!--1-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--2-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--3-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--4-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--5-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--6-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--7-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--8-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--9-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--10-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--11-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--12-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--13-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--14-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--15-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--16-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--17-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--18-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--19-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--20-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--21-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--22-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--23-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--24-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>        
        <!--25-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--26-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--27-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--28-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--29-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--30-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--31-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--32-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--33-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--34-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--35-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--36-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--37-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--38-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
        <!--39-->
        <th colspan="3">Kondisi</th>
        <th rowspan="3">Keterangan</th>
    </tr>
    <tr>
        <?php for ($k = 0; $k < 39; $k++) { ?>
            <th colspan="2">Ada</th>
            <th rowspan="2">Tidak Ada</th>
        <?php } ?>

        <th colspan="2">Ada</th>
        <th rowspan="2">Tidak Ada</th>
    </tr>
    <tr>
        <?php for ($k = 0; $k < 39; $k++) { ?>
            <td>Sesuai Standart</td>
            <td>Tidak Sesuai Standart</td>
        <?php } ?>        

        <td>Sesuai Standart</td>
        <td>Tidak Sesuai Standart</td>
    </tr>
</thead>
<tbody>
    <?php
    $i = 1;

    $row = $data3_1->result();
    $rs_count = $num_3_1;

    $totSes = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    $totTdkSes = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    $totTdkAda = array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);

    $totX1 = $totX2 = $totX3 = 0;

    $totAllX1 = $totAllX2 = $totAllX3 = 0;

    $track = 0;
    for ($j = 0; $j < $rs_count; $j++) {
        $totX1 = $totX2 = $totX3 = 0;
        echo '<tr>';
        echo '<td>' . $i++ . '</td>';
        echo '<td>' . $row[$track]->daftar_list_region . '</td>';
        echo '<td>' . $row[$track]->KODE_REGISTRASI . '</td>';
        echo '<td>' . $row[$track]->RS_NAMA . '</td>';
        for ($k = 0; $k < 39; $k++) {
            if ($row[$track]->SARPRAS_KONDISI == 0) {
                echo '<td>√</td>';
                echo '<td> </td>';
                echo '<td> </td>';
                $totSes[$k] ++;
                $totX1++;
            } else if ($row[$track]->SARPRAS_KONDISI == 1) {
                echo '<td> </td>';
                echo '<td>√</td>';
                echo '<td> </td>';
                $totTdkSes[$k] ++;
                $totX2++;
            } else if ($row[$track]->SARPRAS_KONDISI == 2) {
                echo '<td> </td>';
                echo '<td> </td>';
                echo '<td>√</td>';
                $totTdkAda[$k] ++;
                $totX3++;
            }

            echo '<td>' . $row[$track]->SARPRAS_KET . '</td>';
            $track++;
        }
        $totAllX3 += $totX3;
        $totAllX2 += $totX2;
        $totAllX1 += $totX1;

        echo '<td>' . $totX1 . '</td>';
        echo '<td>' . $totX2 . '</td>';
        echo '<td>' . $totX3 . '</td>';
        echo '</tr>';
    }
    if ($row != null) {
        echo '<tr>';
        echo '<td>TOTAL</td>';
        echo '<td> </td> <td> </td> <td> </td>';
        for ($l = 0; $l < 39; $l++) {
            echo '<td>' . $totSes[$l] . '</td>';
            echo '<td>' . $totTdkSes[$l] . '</td>';
            echo '<td>' . $totTdkAda[$l] . '</td>';
            echo '<td> - </td>';
        }
        echo '<td>' . $totAllX1 . '</td>';
        echo '<td>' . $totAllX2 . '</td>';
        echo '<td>' . $totAllX3 . '</td>';
        echo '</tr>';
    }
    ?>
</tbody>